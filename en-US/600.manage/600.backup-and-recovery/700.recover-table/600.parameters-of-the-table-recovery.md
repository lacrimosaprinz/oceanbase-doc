# Parameters related to table restore

This topic describes the parameters in table restore statements.

## Statements

* Restore tables:

   ```sql
   ALTER SYSTEM
   RECOVER TABLE table_name_list
   TO TENANT dest_tenant_name
   FROM uri
   [UNTIL [TIME|SCN]=['timestamp'|scn]]
   WITH 'restore_option'
   [WITH KEY FROM 'backup_key_path' ENCRYPTED BY 'password']
   [REMAP TABLE remap_table_name_list]
   [REMAP TABLEGROUP remap_tablegroup_list]
   [REMAP TABLESPACE remap_tablespace_list];
   ```

* Cancel a table restore job:

   ```sql
   ALTER SYSTEM CANCEL RECOVER TABLE dest_tenant_name;
   ```

## Parameters

| Parameter | Description |
|-----------------------------|------------------------------------------------|
| table_name_list | The list of tables to be restored, in the format of <code>database_name.table_name1,database_name.table_name2,...</code>. Separate the table names with commas (,). </br>When this parameter is specified, letters in the <code>database_name</code> and <code>table_name</code> values are persisted to an internal table.<ul> <li> For an Oracle tenant, the value of <code>database_name</code> is the same as the user name of the table owner, and both <code>database_name</code> and <code>table_name</code> are case-insensitive by default. The letters are persisted to the internal table in uppercase. </li> <li>For a MySQL tenant, the value of <code>database_name</code> is the name of the database to which the table belongs. The case sensitivity of <code>database_name</code> and <code>table_name</code> depends on the <code>lower_case_table_names</code> variable that is specified when the source tenant is created. </br>The <code>lower_case_table_names</code> variable specifies whether database names and table names in a tenant are case-sensitive. If the variable is not specified when the tenant is created, the database names and table names are stored in lowercase by default and are case-insensitive in queries. For more information about the <code>lower_case_table_names</code> variable, see  <a href="../../../700.reference/800.configuration-items-and-system-variables/200.system-variable/300.global-system-variable/3600.lower_case_table_names-global.md">lower_case_table_names</a>. </li> <li>If the value of <code>database_name</code> or <code>table_name</code> contains special characters, enclose the value in backticks (\`\`). Then the Parser can correctly handle the special characters, and serialize the <code>table_name_list</code> parameter to an internal table. This way, the special characters do not need to be parsed during deserialization. </li> <li> If you want to restore all tables in a database, specify `table_name_list` in the format of <code>database_name.\*</code>. You can specify only self-managed databases here. Built-in databases of OceanBase Database are not allowed. </li> <li>If you need to restore all user tables in a tenant, specify `table_name_list` in the format of <code>\*.*</code>. </li></ul> |
| dest_tenant_name | The name of the destination tenant to which the table is to be restored. You can restore a table only to a user tenant, but not to the `sys` tenant or a meta tenant.  |
| uri | The data backup path and the log archive path, which are the same as those in the tenant physical restore command. If the data backup is initiated by using `PLUS ARCHIVELOG`, you need to specify only one path. Otherwise, the value must contain at least one data backup path and one log archive path, for example, `'file:///backup/archive, file:///backup/data'`.  |
| 'timestamp'\|scn | The timestamp or SCN to which the table is restored. To restore to a specified timestamp or SCN, join the parameter name and value with an equal sign (`=`). By default, if you do not specify the `UNTIL` clause, the table is restored to the latest checkpoint.  |
| restore_option | The restore options, including `pool_list`, `locality`, `primary_zone`, and `concurrency`. Separate the options with ampersands (`&`). <ul><li>`pool_list`: (Required) The resource pool of the tenant. Multiple resource pools must be separated with commas (,). </li>  <li>`locality`: (Optional) The locality of replicas of the new tenant, which must match the zone information of `pool_list` of the cluster where the new tenant is located. By default, if this parameter is not specified, a full-featured replica is set for each zone in `zone_list` of the resource pool. </br>For example, `locality='F@z1,F@z2,F@z3'`. <li> `primary_zone`: (Optional) The preferred position of the leader of the new tenant, which must match the settings of `pool_list` and `locality`. In other words, it must match the zone information and meet the constraint that `primary_region` must have at least two Paxos members. If this parameter is not specified, the system randomly distributes leaders in the zones specified by `zone_list` of `locality`.  </br>For example, `primary_zone='z1'`.</li> </li> <li>`concurrency`: (Optional) The restore concurrency. If `concurrency` is not specified, the `MAX_CPU` value assigned to the tenant is used as the default value. </br>For example, `concurrency=50`. </ul> |
| WITH KEY FROM 'backup_key_path' ENCRYPTED BY 'password' | Specifies the backup information of the key for encrypting the tenant. You need to specify the related information for key backup during restore only when transparent encryption is configured for the source tenant. The parameters are described as follows:<ul><li><code>backup_key_path</code>: the backup path for the key. </li> <li><code>password</code>: the encryption password specified during key backup. </li></ul> |
| remap_table_name_list | The new name of the restored table. You can perform any of the following operations: rename the restored table without changing the database to which the table belongs, remap the restored table to another database without changing the table name, or rename the restored table and remap the table to another database. Use a colon (\:) to join the source object and the renamed object. The syntax varies with the operation that you perform:<ul> <li>To rename the <code>student</code> table as <code>student2</code> without changing the database to which the table belongs, use the following syntax: <code>REMAP TABLE school.student:student2</code>. </br>By default, if you do not change the database to which the table belongs when you restore the table to the destination tenant, the system will restore the table to the database with the same name as the destination tenant. If the database with the same name does not exist, the table fails to be restored. </li> <li>To change the database to which the table belongs from <code>school</code> to <code>college</code> without changing the table name, use the following syntax: <code>REMAP TABLE school.student:college.student</code>. </li> <li>To rename the <code>student</code> table as <code>student2</code> and change the database to which the table belongs from <code>school</code> to <code>college</code>, use the following syntax: <code>REMAP TABLE school.student:college.student2</code>. </li> <li>To restore all tables in the <code>school</code> database to the <code>college</code> database, use the following syntax: <code>REMAP TABLE school.`*`:college.`*` </code> </li></ul> |
| remap_tablegroup_list | The table group to which the restored table belongs. By default, if the source table is bound to a table group, the system restores the table to a table group with the same name in the destination tenant. If the table group with the same name does not exist, the table fails to be restored. If the destination tenant has other table groups, you can execute this statement to restore the table to another table group. Join the source object and the remapped-to object with a colon (\:).  </br>For example, to restore all tables in the source table group <code>tg1</code> to the <code>newtg1</code> table group in the destintion tenant, use the following syntax: <code>REMAP TABLEGROUP tg1:newtg1</code>.  |
| remap_tablespace_list | The tablespace to which the restored table belongs. A tablespace is a logical unit in OceanBase Database mainly used for data encryption. By default, if the source table is bound to a tablespace, the system restores the table to the tablespace with the same name in the destination tenant. If the tablespace with the same name does not exist, the table fails to be restored. If the destination tenant has other tablespaces, you can execute this statement to restore the table to another tablespace. Join the source object and the remapped-to object with a colon (\:). </br>For example, to restore all tables in the source tablespace <code>ts1</code> to the <code>newts1</code> tablespace in the destination tenant, use the following syntax: <code>REMAP TABLESPACE ts1:newts1</code>.  |
