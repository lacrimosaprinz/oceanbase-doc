|description||
|---|---|
|keywords||
|dir-name||
|dir-name-en||
|tenant-type||

# 查看服务状态

创建服务后，可以通过视图来查看服务的状态。

## 系统租户查看服务状态

1. 使用 `root` 用户登录集群的 `sys` 租户。

   连接示例如下，连接数据库时请以实际环境为准。

   ```shell
   obclient -h10.xx.xx.xx -P2883 -uroot@sys#obdemo -p***** -A
   ```

   有关更加详细的连接数据库的操作指引，参见 [连接数据库概述（MySQL 模式）](../../../../300.develop/100.application-development-of-mysql-mode/100.connect-to-oceanbase-database-of-mysql-mode/100.connection-methods-overview-of-mysql-mode.md) 和 [连接数据库概述（Oracle 模式）](../../../../300.develop/200.application-development-of-oracle-mode/100.connect-to-oceanbase-database-of-oracle-mode/100.connection-methods-overview-of-oracle-mode.md)。

2. 执行以下语句，查看集群中指定租户的 service_name 相关的信息。

   查询示例如下：

   ```shell
   obclient [oceanbase]> SELECT * FROM oceanbase.CDB_OB_SERVICES WHERE TENANT_ID=1002 AND SERVICE_NAME='s_hz';
   ```

   查询结果的示例如下：

   ```shell
   ```

   查询结果中的字段说明如下：

   * `TENANT_ID`：租户 ID。
   * `CREATE_TIME`：服务的创建时间。
   * `MODIFY_TIME`：服务相关信息的更新时间。
   * `SERVICE_NAME_ID`：服务名 ID ，用于唯一标识服务名。
   * `SERVICE_NAME`：服务名。
   * `SERVICE_STATUS`：服务状态，主要有以下几个状态：

      * `STARTED`：表示可以通过本 SERVICE_NAME 建立新的 Session 或者允许请求。
      * `STOPPING`：表示正在通知租户下所有 OBServer 节点将服务暂停，并且不能通过该 SERVICE_NAME 建立新的 Session。
      * `STOPPED`：表示通知完成，既不存在已通过该 SERVICE_NAME 打开的 Session，也不能通过该 SERVICE_NAME 建立新的 Session。

## 用户租户查看服务状态

1. 用户登录集群的 MySQL 租户或 Oracle 租户。

   连接示例如下，连接数据库时请以实际环境为准。

   ```shell
   obclient -h10.xx.xx.xx -P2883 -uroot@mysql_tenant#obdemo -p***** -A
   ```

   有关更加详细的连接数据库的操作指引，参见 [连接数据库概述（MySQL 模式）](../../../../300.develop/100.application-development-of-mysql-mode/100.connect-to-oceanbase-database-of-mysql-mode/100.connection-methods-overview-of-mysql-mode.md) 和 [连接数据库概述（Oracle 模式）](../../../../300.develop/200.application-development-of-oracle-mode/100.connect-to-oceanbase-database-of-oracle-mode/100.connection-methods-overview-of-oracle-mode.md)。

2. 执行以下语句，查看本租户 service_name 相关的信息。

   :::tab
   tab MySQL 模式

   MySQL 模式的查询语句如下：

   ```shell
   obclient [oceanbase]> SELECT * FROM oceanbase.DBA_OB_SERVICES
   ```

   tab Oracle 模式

   Oracle 模式的查询语句如下：

   ```shell
   obclient [SYS]> SELECT * FROM SYS.DBA_OB_SERVICES
   ```

   :::

   查询结果的示例如下：

   ```shell
   ```

   查询结果中的字段说明如下：

   * `CREATE_TIME`：服务的创建时间。
   * `MODIFY_TIME`：服务相关信息的更新时间。
   * `SERVICE_NAME_ID`：服务名 ID ，用于唯一标识服务名。
   * `SERVICE_NAME`：服务名。
   * `SERVICE_STATUS`：服务状态，主要有以下几个状态：

      * `STARTED`：表示可以通过本 SERVICE_NAME 建立新的 Session 或者允许请求。--允许请求是什么意思？
      * `STOPPING`：表示正在通知租户下所有 OBServer 节点的服务暂停，并且不能通过该 SERVICE_NAME 建立新的 Session。
      * `STOPPED`：表示通知完成，既不存在已通过该 SERVICE_NAME 打开的 Session，也不能通过该 SERVICE_NAME 建立新的 Session。

## 相关文档

* [启动服务](300.start-service.md)
* [暂停服务](400.stop-service.md)
* [删除服务](500.delete-service.md)
