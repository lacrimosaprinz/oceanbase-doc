|description||
|---|---|
|keywords||
|dir-name||
|dir-name-en||
|tenant-type||

# 查看后台的分区均衡任务历史

分区均衡任务执行完成后，可以通过视图查看分区均衡任务的执行历史。

## 系统租户查看后台的分区均衡任务

1. 使用 root 用户登录集群的 sys 租户。

2. 执行以下语句，查看指定租户后台的分区均衡任务历史。

   * 查看指定租户的分区均衡任务历史。

     ```shell
     obclient [oceanbase]> SELECT * FROM oceanbase.CDB_OB_BALANCE_JOB_HISTORY WHERE TENANT_ID = 1002 AND JOB_TYPE = 'PARTITION_BALACNE';
     ```

     查询结果如下：

     ```shell
     ```

     有关视图 `CDB_OB_BALANCE_JOB_HISTORY` 中各字段的详细说明，参见 [CDB_OB_BALANCE_JOB_HISTORY]()。

   * 查看指定租户 LS 级别的分区均衡任务历史。

     ```shell
     obclient [oceanbase]> SELECT * FROM oceanbase.CDB_OB_BALANCE_TASK_JOB_HISTORY WHERE TENANT_ID = 1002 AND BALANCE_STRATEGY = 'PARTITION_BALACNE';
     ```

     查询结果如下：

     ```shell
     ```

     有关视图 `CDB_OB_BALANCE_TASK_JOB_HISTORY` 中各字段的详细说明，参见 [CDB_OB_BALANCE_TASK_JOB_HISTORY]()。

   * 查看指定租户 Tablet 级别的分区均衡任务历史。

     ```shell
     obclient [oceanbase]> SELECT * FROM oceanbase.CDB_OB_TRANSFER_TASK_JOB_HISTORY WHERE TENANT_ID = 1002 AND BALANCE_STRATEGY = 'PARTITION_BALACNE';
     ```


     查询结果如下：

     ```shell
     ```

     有关视图 `CDB_OB_TRANSFER_TASK_JOB_HISTORY` 中各字段的详细说明，参见 [CDB_OB_TRANSFER_TASK_JOB_HISTORY]()。


## 用户租户查看后台的分区均衡任务

1. 用户租户的租户管理员登录集群的 MySQL 租户或 Oracle 租户。

2. 执行以下语句，查看本租户后台的分区均衡任务历史。

   :::tab
   tab MySQL 模式

   * 查看指定租户的分区均衡任务历史。

     ```shell
     obclient [oceanbase]> SELECT * FROM oceanbase.DBA_OB_BALANCE_JOB_HISTORY WHERE JOB_TYPE = 'PARTITION_BALACNE';
     ```

     查询结果如下：

     ```shell
     ```

     有关视图 `DBA_OB_BALANCE_JOB_HISTORY` 中各字段的详细说明，参见 [DBA_OB_BALANCE_JOB_HISTORY]()。

   * 查看指定租户 LS 级别的分区均衡任务历史。

     ```shell
     obclient [oceanbase]> SELECT * FROM oceanbase.DBA_OB_BALANCE_TASK_HISTORY WHERE BALANCE_STRATEGY = 'PARTITION_BALACNE';
     ```

     查询结果如下：

     ```shell
     ```

     有关视图 `DBA_OB_BALANCE_TASK_HISTORY` 中各字段的详细说明，参见 [DBA_OB_BALANCE_TASK_HISTORY]()。

   * 查看指定租户 Tablet 级别的分区均衡任务历史。

     ```shell
     obclient [oceanbase]> SELECT * FROM oceanbase.DBA_OB_TRANSFER_TASK_HISTORY WHERE BALANCE_STRATEGY = 'PARTITION_BALACNE';
     ```


     查询结果如下：

     ```shell
     ```

     有关视图 `DBA_OB_TRANSFER_TASK_HISTORY` 中各字段的详细说明，参见 [DBA_OB_TRANSFER_TASK_HISTORY]()。

   tab Oracle 模式

   * 查看指定租户正在执行的分区均衡任务。

     ```shell
     obclient [SYS]> SELECT * FROM SYS.DBA_OB_BALANCE_JOB_HISTORY WHERE JOB_TYPE = 'PARTITION_BALACNE';
     ```

     查询结果如下：

     ```shell
     ```

     有关视图 `DBA_OB_BALANCE_JOB_HISTORY` 中各字段的详细说明，参见 [DBA_OB_BALANCE_JOB_HISTORY]()。

   * 查看指定租户 LS 级别的分区均衡任务。

     ```shell
     obclient [sys]> SELECT * FROM SYS.DBA_OB_BALANCE_TASK_HISTORY WHERE BALANCE_STRATEGY = 'PARTITION_BALACNE';
     ```

     查询结果如下：

     ```shell
     ```

     有关视图 `DBA_OB_BALANCE_TASK_HISTORY` 中各字段的详细说明，参见 [DBA_OB_BALANCE_TASK_HISTORY]()。

   * 查看指定租户 Tablet 级别的分区均衡任务。

     ```shell
     obclient [SYS]> SELECT * FROM SYS.DBA_OB_TRANSFER_TASK_HISTORY WHERE BALANCE_STRATEGY = 'PARTITION_BALACNE';
     ```


     查询结果如下：

     ```shell
     ```

     有关视图 `DBA_OB_TRANSFER_TASK_HISTORY` 中各字段的详细说明，参见 [DBA_OB_TRANSFER_TASK_HISTORY]()。

   :::


