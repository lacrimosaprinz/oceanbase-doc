|description||
|---|---|
|keywords||
|dir-name||
|dir-name-en||
|tenant-type|Oracle Mode|

# 数字格式模型 

数字格式模型（Number Format Models）指定了存储在数据库中的定点数和浮点数的格式。当您需要将 SQL 语句中出现 NUMBER、BINARY_FLOAT 或 BINARY_ DOUBLE 值转换为 VARCHAR2 数据类型时，可以使用函数中的数字格式模型。

## 数字格式模型的元素 

数字格式模型由一个或多个数字格式元素组成。负数返回值自动包含前导负号，正值会自动包含前导空格，除非格式模型包含了 MI、S 或 PR 等表示数字正负的格式元素。

如下表格列出了数字格式包含的元素以及具体的用法。


| 数字格式元素  |     示例 |       描述     |
|---------|-----------------------------|---------------------|
| , （逗号）  | 9,999                       | 在指定位置返回逗号。可以在数字格式模型中指定多个逗号。 限制如下： <ul><li> 逗号元素不能出现在数字格式模型开头。 </li> <li> 在数字格式模型中，逗号不能出现在十进制字符或句号的右侧。 </li></ul>                                                                             |
| . (小数点) | 99.99         | 返回小数点，即在指定的小数点位置。 限制如下： 在数字格式模型中只能指定一个小数点。   |
| $       | $9999                       | 返回带前导美元符号的值。  |
| 0       | 0999 9990   | 返回前导的零。 返回尾随的零。   |
| 9       | 9999        | 返回指定位数的值。如果为正，则返回前导空格；如果为负，则返回前导减号。前导零为空，但零值除外，该值为定点数的小数部分返回零。   |
| B       | B9999                       | 当结果为零时，返回空格。   |
| C       | C999                        | 在指定位置返回 ISO 货币符号(当前 NLS_ISO_CURRENCY 参数所代表的值)。     |
| D       | 99D99                       | 跟"."的作用相同，只能出现一次。所不同的是，该元素会使用参数 `NLS_NUMERIC_CHARACTER` 的默认值。   |
| EEEE    | 9.9EEEE                     | 返回使用科学计数法表示的值。  |
| G       | 9G999                       | 跟"."的作用相同，所不同的是，该元素会使用参数`NLS_NUMERIC_CHARACTER` 的默认值。     |
| L       | L999                        | 在指定位置返回本地货币符号，会使用参数 `NLS_CURRENCY` 当前所代表的值。    |
| Mi      | 9999MI                      | 返回带有尾随减号（-）的负值。 返回带尾随空格的正值。 限制如下： MI 格式元素只能出现在数字格式模型的最后一个位置。    |
| PR      | 9999PR          | 返回\<尖括号\>中的负值。 返回带前导和尾随空格的正值。 限制如下： PR 格式元素只能出现在数字格式模型的最后一个位置。|
| RN(rn)  | RN rn       | 以大写罗马数字形式返回值。 以小写罗马数字形式返回值。 限制如下： 取值可以是介于 1 和 3999 之间的整数。   |
| S       | S9999 9999S | <ul><li> 返回带前导减号（-）的负值。   </li> <li> 返回带前导加号（+）的正值。   </li> <li>返回带有尾随减号（-）的负值。   </li> <li> 返回带尾随加号（+）的正值。</li></ul>    限制如下： S 格式元素只能出现在数字格式模型的第一个或最后一个位置。 |
| TM      | TME TM9     | 默认值为 `TM9`，除非输出超过64 个字符，否则以固定符号返回数字。如果输出超过 64 个字符，将自动以科学记数法返回该数字。 当数字长度超过 64 位时候，`TM9` 的输出等同于 `TME` 的输出。    |
| U       | U9999                | 在指定位置返回由`NLS_dual_currency` 参数代表的当前值确定的欧元（或其他）双货币符号。   |
| V(v)    | 999V99                      | 返回一个乘以 10n 的值（如有必要，将其四舍五入），其中 n 是 V 后面的数字 9 的个数。    |
| X(x)    | XXXX xxxx   | 返回指定位数的十六进制值。如果指定的数字不是整数，则将其舍入为整数。 限制如下： <ul><li> 此元素只接受正值或 0。负值返回一个错误。   </li> <li>只能在该元素前面加 0（返回前导零）或 FM。任何其他元素都会返回错误。如果使用 X 既不指定 0 也不指定 FM，则返回值始终有一个前导空格。</li></ul>                       |
| FM(fm)  | FM999                       | 去除前面的空格。   |


数字格式模型可以在以下的函数中使用：

* 在 TO_CHAR 函数中，将 `NUMBER`、`BINARY_FLOAT` 或 `BINARY_DOUBLE` 数据类型的值转换为 `VARCHAR2` 数据类型。 

* 在 TO_NUMBER 函数中，将 `CHAR` 或 `VARCHAR2` 数据类型的值转换为 `NUMBER` 数据类型。

* 在 TO_BINARY_FLOAT 和 TO_BINARY_DOUBLE 函数中，将 `CHAR` 和 `VARCHAR2` 表达式转换为`BINARY_FLOAT` 或 `BINARY_DOUBLE` 类型。

  
## 示例 

* 'S'格式元素只能出现在数字格式模型的第一个或最后一个位置。当出现在开始位置时，为正数返回带前导加号（+）的值，为负数返回带前导减号（-）的值。当出现在结束位置时，为正数返回带尾随加号（+）的值，为负数返回带尾随减号（-）的值。

  ```sql
  obclient> SELECT TO_CHAR(-1234567890, '9999999999S') FROM DUAL;
  +------------------------------------+
  | TO_CHAR(-1234567890,'9999999999S') |
  +------------------------------------+
  | 1234567890-                        |
  +------------------------------------+
  1 row in set 
  
  obclient> SELECT TO_CHAR(1234567890, '9999999999S') FROM DUAL;
  +-----------------------------------+
  | TO_CHAR(1234567890,'9999999999S') |
  +-----------------------------------+
  | 1234567890+                       |
  +-----------------------------------+
  1 row in set
  ```
  

* '9'格式模型返回指定位数的值，如果为正，则返回前导空格；如果为负，则返回前导减号。前导零值为空，但零值除外，该值为定点数的小数部分返回零。如下例所示，小数部分补了两个'0'。

  ```sql
  obclient> SELECT TO_CHAR(0, '99.99') FROM DUAL;
  +--------------------+
  | TO_CHAR(0,'99.99') |
  +--------------------+
  |    .00             |
  +--------------------+
  1 row in set 
  
  obclient> SELECT TO_CHAR(0.1, '99.99') FROM DUAL;
  +----------------------+
  | TO_CHAR(0.1,'99.99') |
  +----------------------+
  |    .10               |
  +----------------------+
  1 row in set 
  
  obclient> SELECT TO_CHAR(-0.2, '99.99') FROM DUAL;
  +-----------------------+
  | TO_CHAR(-0.2,'99.99') |
  +-----------------------+
  |   -.20                |
  +-----------------------+
  1 row in set 
  ```

* 当结果为零时，'B'格式模型返回空格。

  ```sql
  obclient> SELECT TO_CHAR(0, 'B9999') FROM DUAL;
  +--------------------+
  | TO_CHAR(0,'B9999') |
  +--------------------+
  |                    |
  +--------------------+
  1 row in set
  ```  

* 'FM'格式模型表示去除前导空格。

  ```sql
  obclient> SELECT TO_CHAR(123.456, 'FM999.009') FROM DUAL;
  +------------------------------+
  | TO_CHAR(123.456,'FM999.009') |
  +------------------------------+
  | 123.456                      |
  +------------------------------+
  1 row in set
  ```

* 'EEEE'格式模型表示使用科学计数法表示值。

  ```sql
  obclient> SELECT TO_CHAR(123.456, '9.9EEEE') FROM DUAL;
  +----------------------------+
  | TO_CHAR(123.456,'9.9EEEE') |
  +----------------------------+
  |   1.2E+02                  |
  +----------------------------+
  1 row in set 
  
  obclient> SELECT TO_CHAR(123.456, 'FM9.9EEEE') FROM DUAL;
  +------------------------------+
  | TO_CHAR(123.456,'FM9.9EEEE') |
  +------------------------------+
  | 1.2E+02                      |
  +------------------------------+
  1 row in set
  ``` 

* 'L '格式模型表示在指定位置返回本地货币符号，会使用参数 `NLS_CURRENCY` 当前所代表的值。

  ```sql
  obclient> SELECT TO_CHAR(123.456, 'FML999.99') FROM DUAL;
  +------------------------------+
  | TO_CHAR(123.456,'FML999.99') |
  +------------------------------+
  | $123.46                      |
  +------------------------------+
  1 row in set
  ```

  



