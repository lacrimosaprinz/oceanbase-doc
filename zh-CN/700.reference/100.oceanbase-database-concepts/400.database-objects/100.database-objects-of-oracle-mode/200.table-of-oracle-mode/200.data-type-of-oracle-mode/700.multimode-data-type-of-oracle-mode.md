|description||
|---|---|
|keywords||
|dir-name||
|dir-name-en||
|tenant-type|Oracle Mode|

# 多模数据类型

在 OceanBase  数据库中，将 JSON/GIS/XML 等半结构化类型归为多模数据类型。

## 多模数据的特点

* 多模数据类型组成标准化，比如 RFC8259 是 JSON 的数据交换规范，OGC(Open Geospatial Consortium) 提供了一套文本标记语言 (WKT-CRS) 来描述坐标系统以及其坐标系统间的转换, W3C 也定义了 XML 的标准。
* 多模数据可通过 SQL 直接访问：多模数据都是半结构化数据，多模数据内部的基础类型都可以和 SQL 类型做映射。多模数据在结构上都是通过逻辑树级联的方式，将一系列基础 SQL 类型组织成复杂的复合数据类型。
* 多模数据的计算函数比较固定：多模类型都有标准化格式，在标准化格式中不仅规定了数据的交换格式，也对多模数据的计算 API 做了建议。

## 多模数据的查询计算

多模类型结构灵活，数据库基于多模类型的标准，提供了丰富的函数来支持多模数据的构造、查询和计算。

* 数据构造：比如 JSON/XML 提供了聚合函数，从关系表中抽取基础数据，配合一定的聚合规则，来构造 JSON/XML 对象。
* 数据查询：比如 JSON/XML 可以基于 Path 来访问多模数据对象的子集或某个具体的基础 SQL 元素。
* 数据计算：比如利用 GIS 的函数来计算空间对象之间的关系。

## 多模数据的存储

多模数据类型是复合类型，数据一般是变长的，而且可以构造出非常大的多模数据。为了存储方便，多模数据一般会继承大对象数据的存储能力。理论上大对象数据的存储上限是多模数据的上限，但是实际上一个超大的多模数据的计算或存储都是非常低效的，所以不建议构造超大多模数据。

* Clob/Varchar2 类型：可以基于标准定义的文本格式，直接基于 Clob/Varchar2 存储在数据库。这种方式的缺点是每次对多模数据的查询都需要做解析，所以不建议采用这种方式存储多模数据。
* 原生多模类型：存储的数据格式都是数据库解析优化的，一旦多模数据存入数据库，下次查询不会重新解析，而且在存储空间上也有一定优化，所以建议使用原生多模类型存储。

## 多模数据的数据交换

多模数据都是基于标准定义的格式和其它系统进行数据交换。

<main id="notice" type='notice'>
  <h4>注意</h4>
  <ul>
  <li>Oracle 模式下多模数据类型在当前版本只支持 JSON。</li>
  <li>Oracle 模式下，基于 JSON 的虚拟生成函数，可以在任意 JSON 内的子元素上建立二级索引。</li>
  </ul>
</main>
