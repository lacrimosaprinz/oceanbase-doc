|description||
|---|---|
|keywords||
|dir-name||
|dir-name-en||
|tenant-type|Oracle Mode|

# OceanBase 自有视图

OceanBase 自有视图展示 OceanBase 自有信息的视图。

## 概念

在 OceanBase 数据库中，自有视图是指由 OceanBase 数据库自身定义和实现的视图，用于显示数据库的元数据信息和系统状态信息，包括表、列、索引、用户、角色、权限等。这些自有视图通常存储在系统表空间中，是只读的，不能对其进行修改或删除。

## 存放位置

MySQL 租户下和系统租户下的自有视图放在 OceanBase 库下，Oracle 租户下的自有视图放在 SYS 下。

## 视图区分

### 根据使用场景区分

根据使用场景不同以及展示信息的不同分为数据字典视图和动态性能视图两种。

<main id="notice" type='explain'>
  <h4>说明</h4>
  <p>根据是否有 <code>OB_*</code> 前缀的形式用于区分是兼容类视图还是 OceanBase 自有视图。</p>
</main>

#### 数据字典视图

OceanBase 自有视图中的数据字典视图包含两类：

* DBA_OB_*

仅系统租户可见视图，展示系统租户管理的数据库对象信息，比如 `DBA_OB_SERVERS`、`DBA_OB_UNITS` 等视图。
所有租户可见的视图，展示 OceanBase 特有的租户级数据库对象信息，比如 `DBA_OB_LS_LOCATIONS`、`DBA_OB_TABLEGROUPS` 等视图。

* CDB_OB_*

系统租户下访问所有租户的数据库对象信息，一般都对应租户级的数据字典 `DBA_OB_*`，比如 `CDB_OB_LS_LOCATIONS`、`CDB_OB_TABLEGROUPS` 等视图。

#### 动态性能视图

OceanBase 自有视图中的动态性能视图包含两类：

* GV$OB_*
  
  用于显示整个集群的运行状态和性能指标信息，这类视图可以在整个集群中访问，提供全局状态信息。
  根据访问权限的不同有以下区分：
  * 在 SYS 租户下访问，显示的是所有租户的信息。
  * 在普通租户下访问，显示的是本租户的信息。

* V$OB_*

  用于显示客户端连接到的节点的运行状态和性能指标信息，这类视图只能用于提供客户端连接到的节点的状态信息，如果需要访问其他节点的状态信息，请使用 `GV$OB_*` 视图。

OceanBase 数据库 V4.0.0 以前版本，部分自有视图不加 OB_前缀，`v$plan_cache_stat`、`v$obrpc_outgoing` 等视图。
OceanBase 数据库 V4.0.0 及以后版本，统一增加 OB_ 前缀，`V$OB_PLAN_CACHE_STAT`、`V$OB_RPC_OUTGOING` 等视图。

### 根据访问权限区分

根据访问权限的不同分为系统租户数据字典视图和租户级数据字典视图。

#### 系统租户数据字典视图

系统租户数据字典视图是指只有系统管理员（SYSDBA）和系统用户（SYS）才能访问的数据字典视图，用于显示整个数据库的元数据信息和系统状态信息，包括表、列、索引、用户、角色、权限等。这些视图通常存储在系统表空间中，是只读的，不能对其进行修改或删除。

#### 租户级数据字典视图

租户级数据字典视图是指普通用户和租户管理员可以访问的数据字典视图，用于显示当前租户的元数据信息和系统状态信息，包括表、列、索引、用户、角色、权限等。这些视图通常存储在用户表空间中，是只读的，不能对其进行修改或删除。
系统租户数据字典视图可以显示整个数据库的元数据信息和系统状态信息，包括所有租户的信息。而租户级数据字典视图只能显示当前租户的元数据信息和系统状态信息，不能显示其他租户的信息。

## 相关文档

* [视图概述](100.view-overview-of-oracle-mode.md)
* [Oracle 兼容视图](300.oracle-compatible-view-of-oracle-mode.md)
