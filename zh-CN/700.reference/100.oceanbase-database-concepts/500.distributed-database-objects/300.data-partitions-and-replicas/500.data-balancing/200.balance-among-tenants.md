|description||
|---|---|
|keywords||
|dir-name||
|dir-name-en||
|tenant-type||

# 租户间均衡

OceanBase 数据库为多租户架构，每个租户拥有自己的资源池，资源单位为 Unit，包含 CPU、内存、磁盘等规格。租户间的均衡即集群级的 Unit 均衡。

## Unit 创建时的分配

系统租户创建 Unit 时，系统会通过 CPU、内存、磁盘空间等的使用情况计算加权值进行比较，使新建的 Unit 分配到剩余资源最多的 Server 上。

## Unit 动态负载均衡

当磁盘水位线高于集群级配置项 `server_balance_critical_disk_waterlevel` 设置的值时，会把高水位 Server 上的 Unit 迁移到低水位的 Server 上，达到磁盘均衡的目标。此时，Server 只要能够满足 Unit 所需的 CPU 和内存等规格即可迁入。

当磁盘整体水位不高时，以 CPU 和内存的加权计算负载，把高负载 Server 上的 Unit 迁移到低负载 Server 上，达到均衡 CPU 和内存的目标。此时，只需要保证迁入后 Server 的磁盘水位线不超过 集群级配置项 `server_balance_critical_disk_waterlevel` 设置的值即可。

在系统租户下，通过修改租户级配置项 `enable_rebalance`，可以关闭集群级 Unit 动态负载均衡。
