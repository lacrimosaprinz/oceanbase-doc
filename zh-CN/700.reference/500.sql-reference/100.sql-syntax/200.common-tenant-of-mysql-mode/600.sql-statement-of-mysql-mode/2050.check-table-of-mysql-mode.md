| Description   |                 |
|---------------|-----------------|
| keywords      |                 |
| dir-name      |                 |
| dir-name-en   |                 |
| tenant-type   | MySQL Mode      |

# CHECK TABLE

## 描述

该语句用于检查数据库中的表的完整性和一致性。它可以帮助找出表中存在的问题，并提供修复的建议。

`CHECK TABLE` 语句可以检查以下方面的问题：

* 数据损坏：检测表中的数据是否存在损坏，例如丢失、重复或不一致的数据。
* 索引问题：检查表的索引是否正确建立和维护，是否存在损坏的索引或重复的索引。
* 表结构问题：检查表的结构是否正确，例如字段类型、长度、默认值等是否符合定义。
* 违反约束：检查表中的数据是否违反了定义的约束，例如主键、唯一键、外键等。

## 权限要求

执行 `CHECK TABLE` 语句需要当前用户至少拥有对应对象的 `SELECT` 权限。有关 OceanBase 数据库权限的详细介绍，请参见 [MySQL 模式下的权限分类](../../../../../600.manage/500.security-and-permissions/300.access-control/200.user-and-permission/200.permission-of-mysql-mode/100.permission-classification-of-mysql.md)。

## 语法

```sql
CHECK TABLE table_name_list [check_option_list];

table_name_list:
    table_name [, table_name ...]

check_option_list:
    check_option [check_option ...]

check_option:
    FOR UPGRADE
    | QUICK
    | FAST
    | MEDIUM
    | EXTENDED
    | CHANGED
```

## 参数说明

|    参数项    |    描述  |
|--------------|---------|
| table_name   | 指定要检查的表名。可以同时指定多个表，用英文逗号（`,`）分隔。|
| check_option_list | 可选项，用于指定进一步的检查选项。可以指定组合检查选项，即同时指定多个检查选项，具体参数介绍可参见下文 [check_option](#check_option)。|

### check_option

* `FOR UPGRADE`：用于检查指定表是否与当前版本的数据库兼容。使用 `FOR UPGRADE` 时，服务器会检查每个表，确定自创建表以来是否有任何数据类型或索引方面的不兼容性变化。如果没有，则检查成功。否则，如果存在可能的不兼容性，服务器会对表进行全面检查（可能需要一些时间）。如果全面检查成功，服务器会将表的 `.frm` 文件标记为当前的数据库版本号。标记 `.frm` 文件可以确保使用相同版本的服务器进行的进一步检查是快速的。
* `QUICK`：进行快速检查，只对表头和索引做简单的校验。
* `FAST`：进行快速检查，只对表头做简单的校验。
* `MEDIUM`：进行中等程度的检查，对数据和索引都进行校验。
* `EXTENDED`：进行详细的检查，包括数据、索引和约束的校验。
* `CHANGED`：只检查上次检查后发生更改的表。

需确认上面参数解释和下面解释那个是正确的？？？

`FOR UPGRADE`：检查表以准备升级。
`QUICK`：不扫描行以检查不正确的链接。
`FAST`：仅检查没有正确关闭的表。
`CHANGED`：仅检查自上次检查以来发生更改或没有正确关闭的表。
`MEDIUM`：扫描行以验证已删除的链接是否有效。还会为行计算键的校验和，并通过计算的键的校验和进行验证。
`EXTENDED`：对每个行进行完全键查找。确保表是 100% 一致，但耗时较长。

## 示例

使用了 `FAST` 和 `QUICK` 选项来对表 `test_tbl1` 进行快速检查，以确定它是否被正确关闭。

```sql
CHECK TABLE test_tbl1 FAST QUICK;
```

## 相关文档

[查看表](../../../../300.database-object-management/100.manage-object-of-mysql-mode/200.manage-tables-of-mysql-mode/500.view-the-definition-of-a-table-of-mysql-mode.md)
