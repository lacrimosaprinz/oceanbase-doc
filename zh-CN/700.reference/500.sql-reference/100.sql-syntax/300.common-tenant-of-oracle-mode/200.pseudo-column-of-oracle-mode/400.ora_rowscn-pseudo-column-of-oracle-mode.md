| Description   |                 |
|---------------|-----------------|
| keywords      |                 |
| dir-name      |                 |
| dir-name-en   |                 |
| tenant-type   | Oracle Mode     |

# ORA_ROWSCN 伪列

ORA_ROWSCN 伪列将最新更改的系统更改号（System Change Number，SCN）反映到一行，该更改号表示这一行数据的修改操作所在事务的提交时间。本文主要介绍 ORA_ROWSCN 伪列的使用。

`ORA_ROWSCN` 伪列反映的更改可以发生在块级别（粗粒度）或在行级别（细粒度）。

无论是在块级还是在行级，`ORA_ROWSCN` 所返回的 SCN 都可能不是完全精确的。例如，如果事务更改了块中的行 `r0` 并在 SCN 15 处提交，则该行的 `ORA_ROWSCN` 返回值并不总是 15。虽然 `ORA_ROWSCN` 永远不会返回小于 15 的值，但有可能返回任何大于或等于 15 的值。也就是说，某一行的 `ORA_ROWSCN` 并不保证总是返回最后修改该行的事务所精确提交的 SCN。但是，对于细粒度的 `ORA_ROWSCN`，如果两个事务 `tran1` 和 `tran2` 分别前后修改了同一行 `r0` 并提交，那么在 `tran1` 提交后对 `r0` 行的 `ORA_ROWSCN` 查询的返回值比 `tran2` 所提交的值要小。如果一个块被查询两次，那么即使在查询间隔内没有更新行，`ORA_ROWSCN` 的值也可能在查询之间发生变化。唯一能保证的是两个查询中 `ORA_ROWSCN` 的返回值大于最后修改该行的事务所提交的 SCN。

需要注意以下事项：

* 不能在对视图的查询中使用 `ORA_ROWSCN` 伪列。但是，可以在创建视图时使用它来引用基础表，还可以在 `UPDATE` 或 `DELETE` 语句的 `WHERE` 子句中使用此伪列。

* 闪回查询不支持 `ORA_ROWSCN`。

* `ORA_ROWSCN` 不能用于外部表。
