| Description   |                 |
|---------------|-----------------|
| keywords      |                 |
| dir-name      |                 |
| dir-name-en   |                 |
| tenant-type   | Oracle Mode     |

# 引用分区表和索引

表和索引可以被划分为多个分区中，并且在每个分区中具有相同的逻辑属性。例如，表中的所有分区共享相同的列和约束定义，而索引中的所有分区共享相同的索引列。

用户可以使用分区扩展名和子分区扩展来执行某些分区级和子分区级操作。例如，仅在一个分区或子分区上删除所有行。如果没有扩展名称，则需要使用判断语句（`WHERE` 子句）定义删除范围。Range 分区表和 List 分区表并不适合使用判断语句定义分区级操作，尤其是当范围分区键使用多个列时。而 Hash 分区和子分区是基于系统定义的哈希函数，所以使用判断语句也很困难。

分区扩展名使您像使用表一样使用分区。此方法的一个优点是（对 Range 分区的表最有用），您可以通过对其他用户或角色授予（或撤消）这些视图的特权来构建分区级别的访问控制机制。要将分区用作表，需要通过从单个分区中选择数据来创建视图，然后将该视图用作表。

## 语法

用户可以通过如下 SQL 语法指定分区扩展表名和子分区扩展表名。

分区扩展表名的语法如下：

```sql
PARTITION partition
```

子分区扩展表名的语法如下：

```sql
SUBPARTITION subpartition
```

DML 语句 `INSERT`、`UPDATE` 、`DELETE` 和 `ANALYZE` 语句需要在分区或子分区名称的周围加上括号。

## 扩展名称的限制

使用分区扩展表名和子分区扩展表名时有以下限制：

* 名称中没有同义词。必须使用基表指定分区或子分区扩展名，不能使用同义词、视图或任何其他对象。

* 在 `PARTITION` 和 `SUBPARTITION` 子句中，不能为分区或子分区名称指定绑定变量。

## 示例

在以下示例中，分区表 `sales` 具有分区 `sales_q1_2021`，并为其创建视图，然后从分区中删除一些行。

```sql
/*为分区 sales_q1_2000 创建视图 Q1_2021_sales*/
CREATE VIEW Q1_2021_sales
AS
SELECT *
FROM sales PARTITION (SALES_Q1_2021);

/*删除视图 Q1_2021_sales 中符合条件 amount_sold < 0 的值*/
DELETE FROM Q1_2021_sales
WHERE amount_sold < 0;
```
