| Description   |                 |
|---------------|-----------------|
| keywords      |                 |
| dir-name      |                 |
| dir-name-en   |                 |
| tenant-type   | Oracle Mode     |

# REGEXP_SUBSTR

## 描述

该函数允许使用正则表达式搜索字符串并返回匹配字符串，扩展了 `SUBSTR` 函数的功能。
该函数类似于 `REGEXP_INSTR`，但它不返回子字符串的位置，而是返回子字符串。如果仅需要匹配字符串的内容，但不需要返回其在源字符串中的位置，则此函数很适用。

## 语法

```sql
REGEXP_SUBSTR(source_char, pattern
               [, position [, occurrence [, match_param [, subexpr] ] ] ]
              )
```

## 参数解释

|     参数      |                                                                                                                                                                                      说明                                                                                                                                                                                      |
|-------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| source_char | 指定用作搜索值的字符表达式，数据类型可以为 `CHAR`、`VARCHAR2`、`NCHAR`、`NVARCHAR2` 或 `CLOB`。                                                                                                                                                                                                                                                                                                        |
| pattern     | 指定正则表达式截取规则。它通常是一个文本字面量，字符类型可以为 `CHAR`、`VARCHAR2`、`NCHAR` 或 `NVARCHAR2`。                                                                                                                                                                                                                                                                                                     |
| position    | 指定开始正则表达式匹配的起始位置，取值是一个正整数，为可选项。默认值是 `1`，表示从第一个字符开始搜索 `source_char`。                                                                                                                                                                                                                                                                                                          |
| occurrence  | 指定 `source_char` 中第几个正则表达式匹配位置，为可选项。默认值为 `1`。 如果 `occurrence` 大于 1，则从第一次匹配后的第一个字符开始搜索第二次正则表达式匹配，依此类推。                                                                                                                                                                                                                                                        |
| match_param | 指定更改正则表达式默认匹配方式，为可选项。是数据类型 `VARCHAR2` 或 `CHAR` 的字符表达式。 <ul><li> `i` 表示大小写不敏感。   </li><li> `c` 表示大小写敏感。   </li><li> `n` 表示句点 `.` 可以匹配换行符。   </li><li> `m` 表示多行模式。  </li><li> `x` 表示忽略空格字符，默认情况下，空格字符会相互匹配。</li></ul>    |
| subexpr     | 指示 `pattern` 要返回的子表达式，是一个从 `0` 到 `9` 的非负整数，为可选项。默认值为 `0`，表示返回第一个子表达式。                                                                                                                                                                                                                                                                                                        |

## 返回类型

返回与参数 `source_char` 相同的 `VARCHAR2` 或 `CLOB` 数据类型。

## 示例

* 把 `abc,def,ghi` 拆分为 `abc`、`def` 和 `ghi`。

  ```sql
  obclient> SELECT REGEXP_SUBSTR('abc,def,ghi', '[^,]+',1,1) AS "第一个",
                REGEXP_SUBSTR('abc,def,ghi', '[^,]+',1,2) AS "第二个",
                REGEXP_SUBSTR('abc,def,ghi', '[^,]+',1,3) AS "第三个"
       FROM DUAL;
  +-----------+-----------+-----------+
  | 第一个    | 第二个    | 第三个    |
  +-----------+-----------+-----------+
  | abc       | def       | ghi       |
  +-----------+-----------+-----------+
  1 row in set
  ```

* 返回表达式 `abc(d(e(f)gh)i)` 的第三个子表达式。

  ```sql
  obclient> SELECT REGEXP_SUBSTR('abcdefghi', 'abc(d(e(f)gh)i)',1,1,'i',2) FROM DUAL;
  +--------------------------------------------------------+
  | REGEXP_SUBSTR('ABCDEFGHI','ABC(D(E(F)GH)I)',1,1,'I',2) |
  +--------------------------------------------------------+
  | efgh                                                   |
  +--------------------------------------------------------+
  1 row in set
  ```
