| Description   |                 |
|---------------|-----------------|
| keywords      |                 |
| dir-name      |                 |
| dir-name-en   |                 |
| tenant-type   | Oracle Mode     |

# REGEXP_INSTR

## 描述

该函数作用是返回正则表达式匹配值在源字符串中的位置。

## 语法

```sql
REGEXP_INSTR (source_char, pattern
                [, position[, occurrence[, return_opt[, match_param[, subexpr] ] ] ] ]
             )
```

## 参数解释

|     参数      |                                                                                                                                                                                      说明                                                                                                                                                                                      |
|-------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| source_char | 指定用作搜索值的字符表达式，数据类型可为 `CHAR`、`VARCHAR2`、`NCHAR`、`NVARCHAR2` 或 `CLOB`。                                                                                                                                                                                                                                                                                                         |
| pattern     | 指定正则表达式截取规则。它通常是一个文本文字，字符类型可为 `CHAR`、`VARCHAR2`、`NCHAR` 或 `NVARCHAR2`。                                                                                                                                                                                                                                                                                                       |
| position    | 指定开始正则表达式匹配的起始位置，取值是一个正整数，为可选项。默认值是 `1`，表示从第一个字符开始搜索 `source_char`。                                                                                                                                                                                                                                                                                                          |
| occurrence  | 指定 `source_char` 中第几个正则表达式匹配位置，为可选项。默认值为 `1`。 如果 `occurrence` 大于 1，则从第一次匹配后的第一个字符开始搜索第二次正则表达式匹配，依此类推。                                                                                                                                                                                                                                                        |
| return_opt  | 指定返回出现匹配值位置选项，为可选项。默认值为 `0`。 <ul><li> 如果指定 `0`，则返回匹配的第一个字符的位置。   </li><li> 如果指定 `1`，则返回匹配的最后字符后一位的位置。</li></ul>                                                                                                                                                                                    |
| match_param | 指定更改正则表达式默认匹配方式，为可选项。是数据类型 `VARCHAR2` 或 `CHAR` 的字符表达式。 <ul><li> `i` 表示大小写不敏感。   </li><li> `c` 表示大小写敏感。   </li><li> `n` 表示句点 `.` 可以匹配换行符。   </li><li> `m` 表示多行模式。   </li><li> `x` 表示忽略空格字符，默认情况下，空格字符会相互匹配。</li></ul>    |
| subexpr     | 指示 `pattern` 要返回的子表达式，是一个从 `0` 到 `9` 的非负整数，为可选项。默认值为 `0`，表示返回第一个子表达式出现的位置。                                                                                                                                                                                                                                                                                                   |

## 返回类型

返回 `NUMBER` 数据类型。

## 示例

返回表达式 `(Oc)(e(anB)(ase))` 中第四个子表达式 `anB` 中第一个字符和最后一个字符在字符串 `OceanBase` 中的位置。

```sql
obclient> SELECT REGEXP_INSTR('OceanBase', '(Oc)(e(anB)(ase))',1, 1, 0, 'i', 3) "first",
            REGEXP_INSTR('OceanBase', '(Oc)(e(anB)(ase))', 1, 1, 1, 'i', 3)-1 "last"
          FROM DUAL;
+-------+------+
| first | last |
+-------+------+
|     4 |    6 |
+-------+------+
1 row in set
```
