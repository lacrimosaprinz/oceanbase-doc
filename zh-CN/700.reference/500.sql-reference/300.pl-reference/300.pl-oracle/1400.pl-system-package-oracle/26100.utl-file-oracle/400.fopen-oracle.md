| Description   |                 |
|---------------|-----------------|
| keywords      |                 |
| dir-name      |                 |
| dir-name-en   |                 |
| tenant-type   | Oracle Mode     |

# FOPEN 

`FOPEN` 函数用于根据用户指定的信息打开文件。系统最多支持同时打开 50 个文件。

  <main id="notice" >
    <h4>功能适用性</h4>
    <p>该内容仅适用于 OceanBase 数据库企业版。OceanBase 数据库社区版仅提供 MySQL 模式。</p>
  </main>

## 语法 

```sql
UTL_FILE.FOPEN (
   location         IN VARCHAR2,
   filename         IN VARCHAR2,
   open_mode        IN VARCHAR2,
   max_linesize     IN BINARY_INTEGER DEFAULT 1024) 
  RETURN FILE_TYPE;
```



## 参数解释 



|      参数      |                                                                                                                                                                                                                解释                                                                                                                                                                                                                 |
|--------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| location     | 被打开文件所在的路径对象名称。                                                                                                                                                                                                                                                                                                                                                                                                                   |
| filename     | 被打开文件的名称。文件名中不能包含"/"。                                                                                                                                                                                                                                                                                                                                                                                                             |
| open_mode    | 指定文件的打开方式。 模式包括： <ul><li> `r`：文本读。    </li><li> `w`：文本写。    </li><li> `a`：文本追加写。    </li><li> `rb`：字节读。    </li><li>`wb`：字节写。    </li><li> `ab`：字节追加写。</li></ul>   如果尝试在打开某文件时为 `open_mode` 指定 `a` 或 `ab` 但文件不存在，则该文件是以 `write` 模式创建的。 |
| max_linesize | 此文件每行的最大字节数，包括换行符。范围为 \[1，32767\]。默认值为 1024。                                                                                                                                                                                                                                                                                                                                                                                      |



## 返回值 

`FOPEN` 返回 `FILE_TYPE` 即打开文件的句柄。该句柄必须传递给该文件所有的后续操作过程。文件句柄的具体内容是 `UTL_FILE` 私有的，所以不能被引用或更改。

## 异常情况 

* `INVALID_MAXILINESIZE`

  

* `INVALID_MODE`

  

* `INVALID_OPERATION`

  

* `INVALID_PATH`

  

* `INVALID_FILENAME`

  




## 使用说明 

文件位置和文件名参数必须以带引号的字符串的形式提供给 `FOPEN` 函数，以便可以根据 `ALL_DIRECTORIES` 视图指定的可访问目录列表检查文件位置。

同时打开的文件超过 50 个时，会报 `INVALID_OPERATION` 异常。

