|description||
|---|---|
|keywords||
|dir-name||
|dir-name-en||
|tenant-type||

# mysql.role_edges

<main id="notice" type='explain'>
<h4>说明</h4>
<p>该视图从 V4.2.3 版本开始引入。</p>
</main>

## 功能描述

视图 `mysql.role_edges` 用于展示角色和用户之间的授予关系。

## 字段说明

| **字段** | **类型** | **是否为 NULL** | **描述** |
| -------- | -------- | --------------- | -------- |
| FROM_HOST         | varchar(255) | NO   | 被授予的 Role 账户 Host 名字     |
| FROM_USER         | varchar(128) | NO   | 被授予的 Role 账户名     |
| TO_HOST           | varchar(255) | NO   | 受赠者账户 Host 名字     |
| TO_USER           | varchar(128) | NO   | 受赠者账户名     |
| WITH_ADMIN_OPTION | varchar(1)   | NO   | 授予角色的权限是否具有 ADMIN 权限选项     |

## 查询示例

查询角色和用户之间的授予关系。

1. 新建角色 `role1`。

    ```shell
    obclient [oceanbase]> CREATE ROLE IF NOT EXISTS role1;
    Query OK, 0 rows affected, 1 warning
    ```

2. 查询 Warning 信息。

    ```shell
    obclient [oceanbase]> SHOW WARNINGS;

    ```

    查询结果如下：

    ```shell
    +-------+------+---------------------------------------------+
    | Level | Code | Message                                     |
    +-------+------+---------------------------------------------+
    | Note  | 3163 | Authorization ID 'role1'@'%' already exists |
    +-------+------+---------------------------------------------+
    1 row in set (0.002 sec)
    ```

3. 将 `ALTER SYSTEM` 管理权限授予角色 `role1`。

    ```shell
    obclient [oceanbase]> GRANT ALTER SYSTEM ON *.* TO role1;
    ```

4. 查询角色  `role1` 和用户之间的授予关系。

    ```shell
    obclient > SELECT * FROM mysql.role_edges;
    ```

    查询结果如下：

    ```shell
    +-----------+-----------+---------+---------+-------------------+
    | FROM_HOST | FROM_USER | TO_HOST | TO_USER | WITH_ADMIN_OPTION |
    +-----------+-----------+---------+---------+-------------------+
    | %         | role001   | %       | user001 | Y                 |
    | %         | role002   | %       | user001 | Y                 |
    +-----------+-----------+---------+---------+-------------------+
    2 rows in set (0.012 sec)
    ```

## 相关视图或文档

[mysql.default_roles](27800.mysql-default_roles-of-mysql-mode.md)